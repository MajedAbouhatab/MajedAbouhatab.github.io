<!DOCTYPE html>
<html>

<head>
  <style>
    table {
      border-collapse: collapse;
      border-radius: 10px;
      outline: 1px solid gray;
      margin: 0px auto;
      text-align: center;
      width: 90%
    }

    th,
    td {
      padding: 8px;
    }

    img {
      border-radius: 8px;
      width: 120;
      height: 90px;
    }

    tr:nth-child(even) {
      background-color: #2E9FE6;
    }
  </style>
</head>

<body>



  <script type="text/javascript">
    //let client_token;
    let author_id;

    //function GetURL(URL) {

    //var xhr = new XMLHttpRequest();

    //xhr.open('GET', URL, true);

    //xhr.onreadystatechange = function () {
    //    if (xhr.readyState === 4)
    //        if (xhr.status === 200) {
    //            //console.log(JSON.parse(xhr.responseText));
    //document.write(xhr.responseText,'<br>--<br>');
    //client_token=xhr.responseText;
    //        } else console.error('Error: ' + xhr.status);
    //};

    //xhr.send();

    //const request = new XMLHttpRequest();
    //request.addEventListener('readystatechange',()=>{document.write(request.responseText,'<br>--<br>');
    //})
    //request.open('GET',URL);
    //request.send();


    //const getUser = async () => {
    //    const response = await fetch(URL)
    //const user = await response.json();
    //console.log(user);
    //return user;

    //getUser;

    //}
    //return fetch(encodeURI(URL), { 'method': 'get', muteHttpExceptions: true, headers: { 'Authorization': 'Bearer ' + client_token } }).getContentText();
    //}


  </script>
  <script type="text/javascript">


    //const GetURL = async () => {
    const Main = async () => {

      let e;
      client_token = (await (await fetch('https://www.hackster.io/users/api_token')).json())['client_token'];
      document.write('<br>');
      document.write(client_token);
      const user_name = e == null || e.parameter['user_name'] == null || e.parameter['user_name'] == '' ? 'abouhatab' : String(e.parameter['user_name']);
      let author_id = (await (await fetch('https://www.hackster.io/' + user_name)).text()).split('entityId')[1].split('"')[1];
      if (isNaN(author_id)) author_id = '648001';
      document.write('<br>');
      document.write(author_id);
    };

    Main();


    //console.log(fetch('https://www.hackster.io/users/api_token').then(r=>r.json()).then(d=>console.log(d['client_token'])));
    //GetURL();
    //GetURL();




    //fetch('https://www.hackster.io/users/api_token', {  'Authorization': 'Bearer ' + client_token })
    //  .then(response => response.json())
    //  .then(data => client_token =data['client_token'])

    //fetch('https://www.hackster.io/abouhatab')
    //  .then(response => response.text())
    //  .then(data => author_id = data.split('entityId')[1].split('"')[1])


    //fetch('https://www.hackster.io/abouhatab')
    //  .then(response => response.text())
    //  .then(data => console.log(data))

    //console.log(author_id);



    // .then(data => client_token = JSON.parse(data)['client_token']);

    ////fetch('https://www.hackster.io/users/api_token').then(response => return response.json()).then(data => document.write(data))
    //GetURL("https://www.hackster.io/users/api_token");
    //client_token = JSON.parse(GetURL('https://www.hackster.io/users/api_token').json)['client_token'];
    //JSON.parse(GetURL('https://www.hackster.io/users/api_token').json)['client_token'];
    //console.log(client_token);
    //document.write(JSON.parse(GetURL('https://www.hackster.io/users/api_token').json)['client_token']);
  </script>
</body>

</html>